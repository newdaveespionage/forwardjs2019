# Testing

* @GantLaborde 

## Caveats 

* Testing is imperfect 
* Perspective is React / React Native 

## Guidance

* Book - "The Checklist Manifesto"
* Use this as a checklist to see if you're doing what you need to do 

## Why Test 

* When tests pass you feel amazing 
* If you want to ship durable code 
* Just aiming for coverage may not be the right thing 
* What should we be building a feature on 

## Good things

* Tests save you time later on 
* Backfilling tests is a good thing, they may not be as reliable 
* If you think through test cases beforehand, it simplifies things
* If you're doing the same thing twice, DRY your code 
* If you're doing two things in the same code, split your code 
* Testing does not need to be strictly pass / fail (regression, snapshots)
* Roll your own testing framework, as every project is different 

## Objective 

* What tests are important for the feature of this project? 

* Existing May not be the hard and fast rules 

## Unit Tests 

### What

* Where we keep declarative code accountable
* Did a thing do the thing 

### Frameworks 

* Ava testing framework might be a thing to investigate
* React Testing Library (replacement for Enzyme, as Enzyme may not live beyond AirBnB's future of framework decisions)
  * abstraction above existing unit testing

### Mocking 

* Requires mocking 
* Jest can have mock apis just by setting up proper file structure 
* Dates ( do in beforeEach )
* Ensure mocks are deterministic (platform dependencies are abstracted away)

## Integration Testing 

* classic case - two unit tests, one integration test 
* In encapsulated frameworks (React, Vue), may lend to false security
* If encapsulation is violated or blurred 
* If performance across multiple items is important 
* Checking visual elements 

## Snapshot Testing 

* Checking if something changed in an expected structure 
* Cheapest unit tests (because the data is pre-generated by running the code)
* React components are perfect for snapshot tests 
* Great for storybook (Storybook are a type of Snapshot testing)
* XState and React-Automata for state snapshots 
* Dependency injection middleware for automating state testing

## Greybox testing 

* Avoid blackbox testing 
* Cypress can inspect elements, track issues, record videos when things break 
* Don't use Appium - is bad 
* React Native - Use Detox 

### Detox 

http://github.com/wix/detox

## Soft Tests 

* Linters 
* ESLint
* Complexity Audits 
* Accessibility Audits (React and React Native have linters)

## Gotchas for testing an Open codebase

* Use Husky to check on Commit/Push/PR
* Commit - devs got angry 
* Push - designers and managers got angry 
* PR was the eventual point of entry
* Use Danger CI

## Environment tests 

* Solidarity 
* ...envinfo 

## API Snapshots 

* Snapshot testing 

## Perf Testing 

* benchmarkjs.com 
* js inspect 
* size audit 

## Test testing 

* Coverage reporting
* Greenkeeper.io 
* Updtr 
* Madge - circular redundancy 
* Anomaly detection - doesn't exist yet 
* Static type checking - doesn't exist yet 
  * Use some sort of static typed language 
  * Flow 
  * Typescript 
  * Re... something something? 
* Chaos testing - abstract input instead of expected input 
  * Service Fabric 
  * Big list of naughty strings
  * Service Monkey 
  * Parameterized Chaos 
  * Testcheck.js
* Production testing - Crowd sourced errors 

## Conclusion

* Testing is not painful in and of itself
* It's the way we percieve it
* What is durable and effective for my software?
* It can feel crazy
* At the end of the day, we're to blame 
* With great tools can come great wisdom 
